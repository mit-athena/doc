For the most part, third-party software is easy to locate because it
is found in the third hierarchy.  Nevertheless, it's a good idea to
keep track of what we get from outside, especially for things outside
of third.  There are also some notes at the end of this file on how we
deal with building third-party software.

Third-party stuff not under third
---------------------------------

	* athena/etc/xlogin/bitmaps/menu16

		This is from the X11 release; it probably never
		changes.  We have a copy of it here because xlogin
		needs all its bitmaps locally in /etc/athena/login,
		and fetching it out of the vendor X distribution at
		build time is contrary to principles.

	* packs/build/autoconf/

		The files in this directory are copied from
		third/autoconf and used by do.sh.

	* packs/config/named.root

		This is a copy of the named.root file available at
		rs.internic.net:/domain/named.root.

	* packs/config/Dash.fallback

		A fallback copy of
		/afs/athena.mit.edu/system/config/dash/Dash.menus for
		when the master copy is inaccessible.  This should be
		updated at release time.

	* packs/dotfiles/arch/sgi_*/cshrc

		A line to set XUSERFILESEARCHPATH in .cshrc is derived
		from a piece of the IRIX file /var/X11/xdm/Xsession.dt.

	* packs/dotfiles/{README.mail,dot.cshrc,dot.login,dot.logout,
		dot.mh_profile,welcome}

		These should be kept in sync with the copies on
		moira's local disk (/moira/dotfiles/*), which are
		what actually get copied into new home directories.

	* Modified operating system files

		We keep some modified configuration files from the
		operating systems we use in the os and arch
		subdirectories of packs/config and packs/maint.
		The files and their origins are:

		Solaris files in packs/config:

		Athena4.kt	/usr/openwin/share/etc/keytables/US4.kt.Z
		Athena5.kt	/usr/openwin/share/etc/keytables/US_UNIX5.kt.Z
		devlink.tab	/etc/devlink.tab
		inetd.conf	/etc/inet/inetd.conf
		inittab		/etc/inittab
		logindevperm	/etc/logindevperm
		keytable.map	/usr/openwin/share/etc/keytables/keytable.map
		minor_perm	/etc/minor_perm
		name_to_sysnum	/etc/name_to_sysnum
		nsswitch.conf	/etc/nsswitch.conf
		services	/etc/inet/services
		su		/etc/default/su
		system		/etc/system

		Solaris files in packs/maint:

		nfs.client	/etc/init.d/nfs.client
		rpc		/etc/init.d/rpc

		IRIX files in packs/config:

		4DWm		/usr/lib/X11/app-defaults/4DWm
		Mwm		/usr/lib/X11/app-defaults/Mwm
		Toolchest	/usr/lib/X11/app-defaults/Toolchest
		crontab.root	/var/spool/cron/crontabs/root
		fonts.alias	/usr/lib/X11/fonts/100dpi/fonts.alias
		fonts.dir	/usr/lib/X11/fonts/100dpi/fonts.dir
		inetd.conf	/etc/inetd.conf
		services	/etc/services
		system.chestrc	/usr/lib/X11/system.chestrc

		IRIX files in packs/maint:

		network		/etc/init.d/network

Distribution sites for software under third
-------------------------------------------

	afsbin		See below.
	ammonite	ftp.gnome.org:pub/GNOME/unstable/sources/ammonite
	audiofile	ftp.gnome.org:pub/GNOME/stable/sources/audiofile
	bash		ftp.gnu.org:pub/gnu/bash
	bind		ftp.isc.org:isc/bind/src
	binutils	ftp.gnu.org:pub/gnu/binutils
	bonobo		ftp.gnome.org:pub/GNOME/stable/sources/bonobo
	bonobo-conf	ftp.gnome.org:pub/GNOME/unstable/sources/bonobo
	bzip2		sources.redhat.com:pub/bzip2
	control-center	ftp.gnome.org:pub/GNOME/unstable/sources/control-center
	db		http://www.sleepycat.com/download.html
	diffutils	ftp.gnu.org:pub/gnu/diffutils
	eel		ftp.gnome.org:pub/GNOME/stable/sources/eel
	emacs		ftp.gnu.org:pub/gnu/emacs; see below
	esound		ftp.gnome.org:pub/GNOME/stable/sources/esound
	evolution	ftp.gnome.org:pub/GNOME/unstable/sources/evolution
	flex		ftp.gnu.org:pub/gnu/non-gnu/flex
	freetype	ftp.freetype.org:pub/freetype2
	gcc		ftp.gnu.org:pub/gnu/gcc
	GConf		ftp.gnome.org:pub/GNOME/unstable/sources/GConf
	gal		ftp.gnome.org:pub/GNOME/unstable/sources/gal
	gdbm		ftp.gnu.org:pub/gnu/gdbm
	gdk-pixbuf	ftp.gnome.org:pub/GNOME/unstable/sources/gdk-pixbuf
	gettext		ftp.gnu.org:pub/gnu/gettext
	glib		ftp.gtk.org:pub/gtk
	gtk		ftp.gtk.org:pub/gtk
	gtkhtml		ftp.gnome.org:pub/GNOME/unstable/sources/gtkhtml
	gmake		ftp.gnu.org:pub/gnu/make
	gmp		ftp.gnu.org:pub/gnu/gmp
	gnome-core	ftp.gnome.org:pub/GNOME/unstable/sources/gnome-core
	gnome-libs	ftp.gnome.org:pub/GNOME/stable/sources/gnome-libs
	gnome-print	ftp.gnome.org:pub/GNOME/stable/sources/gnome-print
	gnome-vfs	ftp.gnome.org:pub/GNOME/unstable/sources/gnome-vfs
	imlib		(Formerly www.rasterman.com; imlib 1 is dead now)
	inetd		From NetBSD (ftp.netbsd.org), usr.sbin/inetd
	intlfonts	ftp.gnu.org:pub/gnu/intlfonts
	ispell		ftp.cs.ucla.edu:pub/ispell-3.1
	jot		From NetBSD (ftp.netbsd.org), usr.bin/jot
	jpeg		ftp://ftp.uu.net/graphics/jpeg/
	kermit		http://www.columbia.edu/kermit
	krb5*		http://web.mit.edu/network/kerberos-form.html
	lam		From NetBSD (ftp.netbsd.org), usr.bin/lam
	libghttp	ftp.gnome.org:pub/GNOME/stable/sources/libghttp
	libglade	ftp.gnome.org:pub/GNOME/stable/sources/libglade
	libpng		http://www.libpng.org/pub/png/libpng.html
	librep		librep.sourceforge.net:pub/librep
	librsvg		ftp.gnome.org:pub/GNOME/stable/sources/librsvg
	libungif	prtr-13.ucsc.edu:pub/libungif
	libxml		ftp.gnome.org:pub/GNOME/stable/sources/libxml
	libxml2		ftp.gnome.org:pub/GNOME/stable/sources/libxml
	look		From NetBSD (ftp.netbsd.org), usr.bin/look
	lprng		ftp.astart.com:pub/LPRng; see below
	medusa		ftp.gnome.org:pub/GNOME/unstable/sources/medusa
	mdoc		From NetBSD (ftp.netbsd.org), share/tmac
	nautilus	ftp.gnome.org:pub/GNOME/stable/sources/nautilus
	nmh		ftp.math.gatech.edu:pub/nmh
	nvi		http://www.bostic.com/vi/
	oaf		ftp.gnome.org:pub/GNOME/stable/sources/oaf
	openafs		http://www.openafs.org/release
	openssh		ftp.openbsd.org:pub/OpenBSD/OpenSSH
	openssl		ftp.openssl.org:source
	ORBit		ftp.gnome.org:pub/GNOME/stable/sources/ORBit
	patch		ftp.gnu.org:pub/gnu/patch
	perl		ftp.cpan.org:pub/CPAN/src
	pine		ftp.cac.washington.edu:pine
			ftp.cac.washington.edu:mail/kerberos4-patches.tar.Z
	pkgconfig	http://www.freedesktop.org/software/pkgconfig.html
	popt		ftp.rpm.org:pub/rpm/dist/rpm-4.0.x
	readline	ftp.gnu.org:pub/gnu/readline
	rcs		ftp.gnu.org:pub/gnu/rcs
	read-edid	http://web.onetel.net.uk/~elephant/john/programs\
			/linux/read-edid/
	rep-gtk		rep-gtk.sourceforge.net:pub/rep-gtk
	rpm		ftp.rpm.org:pub/rpm/dist
	rs		From NetBSD (ftp.netbsd.org), usr.bin/rs
	sawfish		sawmill.sourceforge.net:pub/sawmill
	sendmail*	ftp.sendmail.org:pub/sendmail
	ssh*		ftp.cs.hut.fi:pub/ssh
	sysinfo		http://www.magnicomp.com/
	talk		From NetBSD (ftp.netbsd.org)
			usr.bin/talk goes in the talk subdirectory
			libexec/talkd goes in the talkd subdirectory
			protocols/talkd.h is from include/protocols,
			 with some modifications for portability.
	tcp_wrappers*	ftp.porcupine.org:/pub/security
	tcsh		ftp.astron.com:pub/tcsh
	tetex		ctan.tug.org:tex-archive/systems/unix/teTeX
	texinfo		ftp.gnu.org:pub/gnu/texinfo
	top		ftp.groupsys.com:pub/top
	traceroute	ftp.ee.lbl.gov (top level)
	transcript	From Adobe
	wcl		ftp.x.org:contrib/devel_tools
			(seems to have disappeared; older versoins than
			what we have are available in R5contrib)
	whois		From NetBSD (ftp.netbsd.org), usr.bin/whois
	x3270		ftp.x.org:contrib/applications
	xalf		http://www.lysator.liu.se/~astrand/projects/xalf/
	xmh		From X11R5
	xml-i18n-tools	ftp.gnome.org:pub/GNOME/stable/sources/xml-18n-tools
	xntp		ftp.udel.edu:pub/ntp/ntp4
	xpm		ftp.x.org:contrib/libraries
	xscreensaver	http://www.jwz.org/xscreensaver/
	zlib		ftp.info-zip.org:pub/infozip/zlib

PGP Signatures
--------------

The (*)ed packages above come PGP-signed. Note that some packages have
signatures of the .tar.gz files, and others have signatures of the .tar
files themselves even though you can only download the .tar.gz files.

Local copies of the PGP signing keys, are kept in doc/pgpkeys. You can
add them to your PGP keyring by doing:

	pgp -ka pgpkeys	[PGP 2.6]
	pgpk -a pgpkeys [PGP 5]

And you can verify the signature of a package with

	pgp sigfile  [PGP 2.6]
	pgpv sigfile [PGP 5]

(You will be prompted for the name of the file to compare the
signature against.)

AFS Binaries
------------

AFS binaries are placed under arch/<architecture name> for each
architecture.  For each platform, you should do an import of the
"include" and "lib" directories of the dest tree, using the vendor tag
"transarc" and a release tag like "afs-3_4a_patches_2".  For "lib",
you will have to use the options "-kb -I \!".  At the top level, you
should have afsd, fs, tokens, unlog, and possibly afs.rc; we don't
bother with "cvs import" for these files.  You will also need the
kernel module itself, which varies per platform.

LPRng
-----

We import three packages: the LPRng sources themselves
(LPRng/LPRng-x.tgz) into third/lprng/lprng, the LPRng documentation
(LPRng/LPRng_DOC-x.tgz) into third/lprng/doc, and the ifhp filter
(FILTERS/ifhp-x.tgz) into third/lprng/ifhp.

Emacs
-----

LEIM (Library of Emacs Input Methods) is built as part of Emacs, but
distributed separately.  Untar both emacs and leim (leim will untar
into emacs-xx.yy/leim) and import them both with one command.

Emacs is distributed with .elc files.  When you import new versions of
emacs, do so with the "-I \!" option to prevent CVS from ignoring
these files.  .elc files should be tagged as binary, using "cvs admin
-kb", although that's not terribly critical to Unix CVS clients
(except for the vc-mode files).

Elisp source related to vc-mode needs to be set to "-ko" mode to
prevent expansion of those keywords.  Use "cvs admin -ko" on these
files if they move or if new ones are added.

Third-party build systems
-------------------------

There are two avenues one can take for building third-party software:

	* You can use the native build system.

	* You can declare the native build system a loss, and use one
	  of the two Athena build systems described in the file
	  "build-system" in this directory.  This option is not
	  preferred, but is necessary in cases like afsbin (where we
	  are simply installing target files) or software imported
	  from NetBSD.

In a some cases, the native build system may already conform to the
Athena build system (a configure script which needs no special options
for the Athena environment besides those given in our config.site
file), but generally you will have to write either a configure.athena
or a Makefile.athena file specifying how to build and install the
program.

configure.athena is used when the package builds and installs
normally, but needs to have extra options passed to configure (or has
a configure script which isn't named "configure", or needs additional
steps performed before or after the configure script).

Makefile.athena is needed if the package needs to do anything unusual
at any of the other steps.  A Makefile.athena must have the following
targets:

	prepare		Prepare to build the source tree
	clean		Remove files generated by the all target
	all		Generate all automatically build files
	check		Perform automatic tests, if any
	install		Install the software in $SRVD.

A Makefile.athena file may rely on the following environment variables
(it is most robust to use `"$$VARNAME"' instead of `"${VARNAME}"' in
rules to get the value of such variables):

	ATHENA_SYS	Architecture name for this system
	HOSTTYPE	Platform name for this system
	SRVD		Install destination directory (e.g. /srvd)
	SOURCE		Source tree (e.g. /mit/source)
	COMPILER	Appropriate compiler/linker for this system
	CONFIGDIR	Location of Athena Imake templates
	XCONFIGDIR	Location of X-style Imake templates
	ATHTOOLROOT	Root of installed Athena tree

Following is a sample Makefile.athena file, used to build a package
which uses an X-style Imakefile:

	# $Id: $

	SHELL=/bin/sh

	prepare:
		imake "-I$$XCONFIGDIR" -DUseInstalled "-DSRCDIR=$$SOURCE"
		${MAKE} Makefiles

	clean:
		${MAKE} clean

	all:
		${MAKE} includes depend all

	check:

	install:
		${MAKE} install DESTDIR="$$SRVD"
